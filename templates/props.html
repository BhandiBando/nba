<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.7">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; -webkit-text-stroke: #000000}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; -webkit-text-stroke: #000000; min-height: 14.0px}
    span.s1 {font-kerning: none}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE html&gt;</span></p>
<p class="p1"><span class="s1">&lt;html&gt;</span></p>
<p class="p1"><span class="s1">&lt;head&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;meta charset="utf-8" /&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;title&gt;NBA Top Props&lt;/title&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1" /&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;style&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:#0d1117;color:#e6edf3;margin:0}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>.wrap{max-width:1100px;margin:40px auto;padding:0 16px}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>h1{color:#67b7ff;margin:0 0 8px}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>.sub{color:#9da7b3;margin:0 0 20px}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>.controls{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:16px;align-items:flex-start}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>input,select,button{background:#0b1620;color:#e6edf3;border:1px solid #263241;border-radius:8px;padding:8px 10px}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>table{width:100%;border-collapse:collapse;margin-top:8px}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>th,td{padding:10px;border-bottom:1px solid #1f2937;text-align:left;font-size:14px}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>th{color:#9da7b3;font-weight:600}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>.pill{display:inline-block;padding:2px 8px;border-radius:999px;background:#0b2f44;color:#8edaff;font-size:12px}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>#msg{color:#9da7b3;margin-top:10px}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;/style&gt;</span></p>
<p class="p1"><span class="s1">&lt;/head&gt;</span></p>
<p class="p1"><span class="s1">&lt;body&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;div class="wrap"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;h1&gt;NBA Top Props — Today&lt;/h1&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;p class="sub"&gt;Ranked by 0.7×Hit% + 0.3×EV (DK &amp;amp; FD)&lt;/p&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;div class="controls"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>&lt;label&gt;Markets:</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;select id="markets" multiple size="5"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;option value="player_points" selected&gt;player_points&lt;/option&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;option value="player_rebounds" selected&gt;player_rebounds&lt;/option&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;option value="player_assists" selected&gt;player_assists&lt;/option&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;option value="player_steals"&gt;player_steals&lt;/option&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;option value="player_blocks"&gt;player_blocks&lt;/option&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/select&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>&lt;/label&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>&lt;label&gt;Top K:</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;input id="topk" type="number" value="75" min="10" max="300"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>&lt;/label&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>&lt;button id="refresh"&gt;Refresh&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;table id="tbl"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>&lt;thead&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;tr&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;th&gt;Game&lt;/th&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;th&gt;Book&lt;/th&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;th&gt;Player&lt;/th&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;th&gt;Market&lt;/th&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;th&gt;Line&lt;/th&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;th&gt;Pred&lt;/th&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;th&gt;Hit%&lt;/th&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;th&gt;EV/$&lt;/th&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;th&gt;Score&lt;/th&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;th&gt;Injury&lt;/th&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/tr&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>&lt;/thead&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>&lt;tbody&gt;&lt;/tbody&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/table&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;p id="msg"&gt;&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;script&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>const tblBody = document.querySelector("#tbl tbody");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>const btn = document.getElementById("refresh");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>const sel = document.getElementById("markets");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>const topk = document.getElementById("topk");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>const msg = document.getElementById("msg");</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>function selValues(el){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>return Array.from(el.options).filter(o=&gt;o.selected).map(o=&gt;o.value).join(",");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>async function load(){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>msg.textContent = "Loading…";</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>const url = `/api/props_fast?markets=${encodeURIComponent(selValues(sel))}`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>try {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const res = await fetch(url);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const data = await res.json();</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>tblBody.innerHTML = "";</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>if (!Array.isArray(data)) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>msg.textContent = data &amp;&amp; data.error ? ("Error: " + data.error) : "Unexpected response.";</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>return;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>msg.textContent = data.length ? "" : "No props found (check API key/quota or try again soon).";</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>for (const r of data){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const tr = document.createElement("tr");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const hit = r.hit_prob==null ? "" : (r.hit_prob*100).toFixed(1)+"%";</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const ev = r.ev_per_$==null ? "" : r.ev_per_$.toFixed(3);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const score = r.score==null ? "" : r.score.toFixed(3);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>tr.innerHTML = `</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;td&gt;${r.away} @ ${r.home}&lt;/td&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;td&gt;${r.book}&lt;/td&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;td&gt;${r.player}&lt;/td&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;td&gt;${r.market}&lt;/td&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;td&gt;${r.line ?? ""}&lt;/td&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;td&gt;${r.pred_mean==null?"":Number(r.pred_mean).toFixed(2)}&lt;/td&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;td&gt;${hit}&lt;/td&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;td&gt;${ev}&lt;/td&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;td&gt;${score}&lt;/td&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;td&gt;${r.injury_status ? `&lt;span class="pill"&gt;${r.injury_status}&lt;/span&gt;` : ""}&lt;/td&gt;`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>tblBody.appendChild(tr);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>} catch (e) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>msg.textContent = "Fetch failed: " + e;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>btn.addEventListener("click", load);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>load();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;/script&gt;</span></p>
<p class="p1"><span class="s1">&lt;/body&gt;</span></p>
<p class="p1"><span class="s1">&lt;/html&gt;</span></p>
</body>
</html>
